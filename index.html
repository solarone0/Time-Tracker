<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÏãúÍ∞Ñ Ìä∏ÎûòÏª§</title>
    <link rel="stylesheet" href="index.css">
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
</head>
<body>
    <div id="app-wrapper">
        <header>
            <div class="header-left">
                <span class="logo">ÏãúÍ∞Ñ Ìä∏ÎûòÏª§</span>
            </div>
            <div class="header-right">
                <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
            </div>
        </header>

        <div id="app-container">
            <main>
                <div class="main-header">
                    <h2>Ïã§ÏãúÍ∞Ñ ÏßÑÌñâÎ•†</h2>
                    <p>Ïã§ÏãúÍ∞ÑÏúºÎ°ú ÏãúÍ∞ÑÏù¥ ÏßÄÎÇòÍ∞ÄÎäî Í≤ÉÏùÑ ÌôïÏù∏ÌïòÏÑ∏Ïöî.</p>
                </div>

                <div class="tabs">
                    <button class="tab-button active">Ï†ÑÏ≤¥</button>
                </div>

                <div class="list-container">
                    <div class="list-item">
                        <div class="item-name">
                            <span>‚òÄÔ∏è</span>
                            <p>Ïò§Îäò</p>
                        </div>
                        <div class="progress-bar-container">
                            <div class="progress-bar" id="day-progress-bar"></div>
                        </div>
                        <div class="item-value" id="day-percentage">0.000000%</div>
                        <div class="item-time-left" id="day-left"></div>
                    </div>
                    <div class="list-item">
                        <div class="item-name">
                             <span>üìÖ</span>
                            <p>Ïù¥Î≤à Ï£º</p>
                        </div>
                         <div class="progress-bar-container">
                            <div class="progress-bar" id="week-progress-bar"></div>
                        </div>
                        <div class="item-value" id="week-percentage">0.000000%</div>
                        <div class="item-time-left" id="week-left"></div>
                    </div>
                    <div class="list-item">
                        <div class="item-name">
                            <span>üóìÔ∏è</span>
                            <p>Ïù¥Î≤à Îã¨</p>
                        </div>
                         <div class="progress-bar-container">
                            <div class="progress-bar" id="month-progress-bar"></div>
                        </div>
                        <div class="item-value" id="month-percentage">0.000000%</div>
                        <div class="item-time-left" id="month-left"></div>
                    </div>
                     <div class="list-item">
                        <div class="item-name">
                            <span>üéá</span>
                            <p>Ïò¨Ìï¥</p>
                        </div>
                         <div class="progress-bar-container">
                            <div class="progress-bar" id="year-progress-bar"></div>
                        </div>
                        <div class="item-value" id="year-percentage">0.000000%</div>
                        <div class="item-time-left" id="year-left"></div>
                    </div>
                </div>
            </main>
        </div>
    </div>
    <script type="module">
        /**
         * @license
         * SPDX-License-Identifier: Apache-2.0
         */

        // Function to update the progress displays
        function updateProgress() {
            const now = new Date();

            // --- Daily Progress ---
            const startOfDay = new Date(now.getFullYear(), now.getMonth(), now.getDate());
            const endOfDay = new Date(now.getFullYear(), now.getMonth(), now.getDate() + 1);
            const dayTotalMilliseconds = endOfDay.getTime() - startOfDay.getTime();
            const dayElapsedMilliseconds = now.getTime() - startOfDay.getTime();
            const dayPercentage = (dayElapsedMilliseconds / dayTotalMilliseconds) * 100;
            const dayTimeLeft = dayTotalMilliseconds - dayElapsedMilliseconds;
            
            // --- Weekly Progress ---
            const dayOfWeek = now.getDay(); // Sunday = 0, Monday = 1, etc.
            const startOfWeek = new Date(now);
            startOfWeek.setDate(now.getDate() - dayOfWeek + (dayOfWeek === 0 ? -6 : 1)); // Adjust to make Monday the start
            startOfWeek.setHours(0, 0, 0, 0);
            const endOfWeek = new Date(startOfWeek);
            endOfWeek.setDate(startOfWeek.getDate() + 7);
            const weekTotalMilliseconds = endOfWeek.getTime() - startOfWeek.getTime();
            const weekElapsedMilliseconds = now.getTime() - startOfWeek.getTime();
            const weekPercentage = (weekElapsedMilliseconds / weekTotalMilliseconds) * 100;
            const weekTimeLeft = weekTotalMilliseconds - weekElapsedMilliseconds;

            // --- Monthly Progress ---
            const startOfMonth = new Date(now.getFullYear(), now.getMonth(), 1);
            const endOfMonth = new Date(now.getFullYear(), now.getMonth() + 1, 1);
            const monthTotalMilliseconds = endOfMonth.getTime() - startOfMonth.getTime();
            const monthElapsedMilliseconds = now.getTime() - startOfMonth.getTime();
            const monthPercentage = (monthElapsedMilliseconds / monthTotalMilliseconds) * 100;
            const monthTimeLeft = monthTotalMilliseconds - monthElapsedMilliseconds;

            // --- Yearly Progress ---
            const startOfYear = new Date(now.getFullYear(), 0, 1);
            const endOfYear = new Date(now.getFullYear() + 1, 0, 1);
            const yearTotalMilliseconds = endOfYear.getTime() - startOfYear.getTime();
            const yearElapsedMilliseconds = now.getTime() - startOfYear.getTime();
            const yearPercentage = (yearElapsedMilliseconds / yearTotalMilliseconds) * 100;
            const yearTimeLeft = yearTotalMilliseconds - yearElapsedMilliseconds;

            // --- Update UI ---
            updateElement('day', dayPercentage, dayTimeLeft);
            updateElement('week', weekPercentage, weekTimeLeft);
            updateElement('month', monthPercentage, monthTimeLeft);
            updateElement('year', yearPercentage, yearTimeLeft);
        }

        // Helper function to format remaining time
        function formatTimeLeft(ms, period) {
            if (ms < 0) return '';
            const totalSeconds = Math.floor(ms / 1000);
            const days = Math.floor(totalSeconds / (24 * 60 * 60));
            const hours = Math.floor((totalSeconds % (24 * 60 * 60)) / (60 * 60));
            const minutes = Math.floor((totalSeconds % (60 * 60)) / 60);
            const seconds = Math.floor(totalSeconds % 60);

            const pad = (num) => num.toString().padStart(2, '0');
            const timeString = `${pad(hours)}:${pad(minutes)}:${pad(seconds)}`;

            if (period === 'day') {
                return timeString;
            }
            return `${days}Ïùº ${timeString}`;
        }

        // Helper function to update a specific progress element
        function updateElement(id, percentage, timeLeftMs) {
            const percentageEl = document.getElementById(`${id}-percentage`);
            const progressBarEl = document.getElementById(`${id}-progress-bar`);
            const timeLeftEl = document.getElementById(`${id}-left`);
            
            if (percentageEl && progressBarEl && timeLeftEl) {
                percentageEl.textContent = `${percentage.toFixed(6)}%`;
                progressBarEl.style.width = `${percentage}%`;
                timeLeftEl.textContent = `ÎÇ®Ïùå: ${formatTimeLeft(timeLeftMs, id)}`;
            }
        }

        // Initial call and set interval to update every 100 milliseconds for a smooth feel
        updateProgress();
        setInterval(updateProgress, 100);
    </script>
</body>
</html>